(function(){this.loading=(function(){var animations,hide,hideAnimation,message,messageSpan,overlay,overlayDiv,setHideAnimation,setOpacity,setShowAnimation,show,showAnimation,showing;overlay=void 0;overlayDiv=function(){if(overlay!=null){return overlay}overlay=document.createElement('div');overlay.setAttribute('id','overlay-loading');overlay.style.opacity=0;overlay.style.display='none';overlay.appendChild(messageSpan());return document.body.appendChild(overlay)};message=void 0;messageSpan=function(){if(message!=null){return message}return message=document.createElement('span')};setOpacity=function(element,level){return element.style.opacity=level/100};animations={fadeIn:function(element,callback){var change,opacity;element.style.display='initial';change=function(opacity){var value;value=opacity;return setTimeout((function(){return setOpacity(element,value)}),value*3)};for(opacity=5;opacity<=100;opacity+=5){change(opacity)}return typeof callback=="function"?callback():void 0},fadeOut:function(element){var change,opacity;change=function(opacity,callback){var value;value=opacity;return setTimeout((function(){return setOpacity(element,value)}),(100-value)*3)};for(opacity=100;opacity>=0;opacity+=-5){change(opacity)}return typeof callback=="function"?callback():void 0}};setShowAnimation=function(animation){var showAnimation;return showAnimation=animations[animation]};setHideAnimation=function(animation){var hideAnimation;return hideAnimation=animations[animation]};showing=false;show=function(message){messageSpan().innerHTML=message;if(!showing){return(showing=true)&&showAnimation(overlayDiv())}};hide=function(){showing=false;return hideAnimation(overlayDiv(),function(){return element.style.display='none'})};showAnimation=animations.fadeIn;hideAnimation=animations.fadeOut;return{show:show,hide:hide,setShowAnimation:setShowAnimation,setHideAnimation:setHideAnimation}})()}).call(this);

